
## SQL 이란 ?

 한 온라인 서점을 이용 하는 유저가 
**"축구의 역사" 라는 도서의 출판사와 가격을 알고 싶어 하는데..**  어떻게 해야 할까 ? 

답은 간단하다. 

온라인 서점의 데이터베이스에 있는 '도서' , '축구의 역사', '출판사', '가격'과 같은 단어를 
검색하여 결과 값을 얻게 해주는 언어가 바로 SQL이다.  

 위의 예를 SQL문으로 작성하면 아래와 같다.

```sql
/* "축구의 역사" 라는 도서의 출판사와 가격을 찾으세요. */

SELECT  publisher, price
FROM    Book
WHERE   bookname = '축구의 역사';
--   OR bookname LIKE '축구의 역사';
```

이와 같이 데이터베이스 시스템(DBMS)은 SQL 문을 해석하고 프로그램으로 변환하여 실행한 후 결과를 알려 준다. 

SQL은 `JAVA` 나 `C` 와 같은 프로그래밍 언어의 느낌은 아니다.
그 대신 SQL을 **데이터 부속어(Data Sublanguage)** 라고 부르는데, 
그 이유는 DB의 데이터와 메타 데이터를 생성하고 처리 하는 문법만 갖고 있기 때문이라고 한다.

SQL을 **DBMS에 직접 입력해 사용** 할 수도 있고, 
** `JAVA` , `C` 로 작성된 클라이언트 또는 서버 응용 프로그램에 삽입** 하여 사용할 수도 있다. 
이 외에도 SQL은 다양한 용도로 넓게 사용 된다고 한다. 😊

<br>

### SQL 언어의 특징 👩🏻‍💻

+ SQL문은 **대소문자 구분**을 안한다.

 ( 단 , DB를 다루는 서버환경 , 필드(데이터)명에 따라 대소문자를 구분하기도 한다.)
 
+ 명령어의 마지막에는 **세미콜론(;) 을 작성**한다.

+ 필드 또는 고유값은 **`"` 따옴표로 감싸서 작성** 한다.

+ 모든 프로그래밍 언어의 필수인 **주석**은 다음과 같이 작성한다.
```sql
-- 한줄 주석 작성시 " -- " 로 작성합니다.

/* 

여러 줄 주석 작성 시 /* */ 로 작성합니다.

*/

```


### SQL 과 일반 프로그래밍 언어의 차이점 ⚖

값 |          SQL          | 프로그래밍 언어
:---|:---------------------:|:---:
용도 | DB에서 데이터를 추출하여 문제 해결  | 기계어로 모든 문제를 해결
입출력 |    DB의 테이블로 입력과 출력    |구분 없이 모든 형태로 입출력이 가능하다.
번역 |   데이터베이스 시스템(DBMS)    | 컴파일러
문법 | `SELECT * FROM Book;` | `C` 기준, `int main(void) { ... }`

큰 틀에 놓고 보면 둘 다 프로그래밍 언어지만 엄연히 다르다.

<br>

### SQL의 기능 📋

SQL은 기능에 따라 데이터 정의어 , 데이터 조작어 , 데이터 제어어로 나뉜다.

+ 데이터 정의어 ( DDL ) : 데이터베이스의 **테이블 , 관계의 구조를 생성**하는 데 사용하며 
`CREATE` , `ALTER` , `DROP` 문 등이 있다.

+ 데이터 조작어 ( DML ) : 테이블에 데이터를 **검색 , 삽입 , 수정 , 삭제**하는 데 사용하며
`SELECT` , `INSERT` , `DELETE` , `UPDATE` 문 등이 있다. 여기서 SELECT 문은 **질의어(Query)** 라고 부른다.

+ 데이터 제어어 ( DCL ) : **데이터의 사용 권한을 관리**하는 데 사용하며 DBMS를 사용하는 유저들의 권한을 제어한다. `GRANT` , `REVOKE` 문 등이 있다.

<br>

### SQL 문장 구조 📑

SQL 문을 이해하기 위해 SELECT 문의 문장 구조를 살펴보자.

> SELECT : **질의 결과가 추출되는 속성** (Attribute) 리스트를 열거한다.
> 
> FROM   : **질의에 어느 테이블이 사용**되는지 열거한다.
> 
> WHERE  : **질의의 조건**을 작성한다.

이를 활용하여 **Customer 테이블에서 김연아 고객의 전화번호를 찾으시오.** 라는 질의를 SQL 문으로 표현하면 다음과 같다.

```sql
SELECT	phone
FROM	Customer
WHERE	name = '김연아';
```

이와 같이 `WHERE` 절은 프로그래밍 언어의 `제어문(if)` 과 같은 느낌이라 보면 된다.

## 데이터 조작어 ( DML ) - 검색 🔎

SQL의 `SELECT` 문은 데이터를 검색하는 기본 문장이며, 위에 기술 했듯이 **질의어(Query)** 라고 부른다. 

SELECT문은 검색한 결과를 테이블 형태로 출력하는데  예를 들어 **' 10,000 원 이상인 도서의 이름과 출판사를 검색하세요. '** 라는 질의 형태는 다음과 같이 작성한다.

```sql
SELECT	name,publisher -- name , publisher 속성 추출
FROM	Book -- Book 테이블에서 검색
WHERE	price >= 10000; -- 10,000원 보다 큰 price(가격 속성) 값.
```

SELECT 문의 기본 문법은 다음과 같다.

```sql
SELECT	[ ALL | DISTINCT ] 속성의 이름(들) -- DISTINCT는 중복 값 제거하여 검색 값 표시
FROM	테이블의 이름(들)
[WHERE	검색조건(들)] -- if문이라 보면 된다.
[GROUP BY	속성이름]
[HAVING		검색조건(들)]
[ORDER BY	속성이름 [ ASC | DESC ]]
------------------------------------------
[ ] : 대괄호 안의 SQL 예약어들은 필수가 아닌 선택적으로 사용한다.
| : 선택 가능한 문법들 중 하나를 선택하여 사용한다.
```

기본 문법을 좀 더 깊게 살펴보자.

```sql
SELECT	[ ALL | DISTINCT ]
		[테이블 이름.][ * | 속성이름 [[ AS ] 속성 이름의 별명]]
[FROM
	 {테이블이름 {AS 테이블 이름의 별명}}
     [INNER JOIN | LEFT [OUTER] JOIN | 
     			   RIGHT [OUTER] JOIN {테이블이름 [ON 검색조건]} |
     			   FULL [OUTER] JOINI {테이블 이름} ]]
[WHERE 검색조건(들)]
[GROUP BY { 속성의 이름, [..... , n]}]
[HAVING 검색조건(들)]
[질의 UNION 질의 | 질의 UNION ALL 질의]
[ORDER BY {속성이름 [ASC | DESC] , [..... , n]}}
-------------------------------------------------------------------
[ ] : 대괄호 안의 SQL 예약어들은 필수가 아닌 선택적으로 사용한다.
{ } : 중괄호 안의 SQL 예약어들은 필수적으로 사용한다.
|	: 선택 가능한 문법들 중 하나를 선택하여 사용한다.
```

여기서 `GROUP BY` 와 `HAVING` , `UNION` 절은 나중에 심도있게 알아보도록 하자 !


### `SELECT` 문을 이용한 예제 연습 ✍🏻

데이터 조작어 검색 문법을 알아봤으니 `SELECT` 문의 예제들을 살펴보자.

온라인 서점의 데이터베이스를 전제로 하여 SQL 문을 사용한다.

### 기본 검색 - 1

> 모든 도서의 이름과 가격을 검색하세요 .

```sql
SELECT	bookname , price -- bookname , price 속성 검색
FROM	Book; -- Book 테이블에서
```

**결과**
![](https://velog.velcdn.com/images/jaepal/post/713106c6-15ce-44c3-95ad-22fff938da5d/image.PNG)

간단한 문제다.
여기서 참고할 점은 **SQL 문은 세미콜론(;) 으로 끝난다.**
세미콜론은 SQL-92 표준에서 정한 사항이라곤 하지만 SQL Server 에서는 생략해도 된다고 한다. 
그래도 프로그래밍을 할 때 세미콜론을 붙이는 습관은 좋은 거라 생각하기 때문에 항상 붙이도록 하자.

###  기본 검색 - 2

> 모든 도서의 도서번호 , 도서이름, 출판사 , 가격을 검색하세요 .

```sql
SELECT bookid , bookname , publisher , price
-- OR SELECT *
FROM Book;
```

** 결과 **
![](https://velog.velcdn.com/images/jaepal/post/f46fda31-c69d-4434-beb6-c1fba2e1ee9f/image.PNG)

두 번째 줄 주석부분인 `SELECT *` 은  Book 테이블의 속성이 
위에 작성한 4개의 속성이 전부이기 때문에 `SELECT *` 로 전부 검색해도 무방하다.

### 기본 검색 - 3

> 도서 테이블에 있는 모든 출판사를 검색하시오. 단, 중복을 제거하여 
> 같은 이름의 출판사가 여러 개 나오지 않게한다.

```sql
SELECT DISTINCT publisher -- 중복 필드(데이터) 제거하여 산출
FROM Book;
```

여기서 핵심은 `DISTINCT` 키워드를 사용하여 중복 필드를 제거한다.

![](https://velog.velcdn.com/images/jaepal/post/df1701fd-7cb9-4d46-9b2e-ca2f3efecda0/image.PNG)


이번 글 에서는 `SELECT` 절 까지만 작성하고 다음 글에서 `WHERE` 절 및 예약어들을
정리해보도록 하겠다. 🤧

## 마치며.

최근 데이터베이스를 배우기 시작하면서, 한번 리마인드하여 
처음부터 정리하자는 마음가짐으로 정리하여 작성해봤다 ! 

작성하면서 느낀 거지만 SQL의 핵심은 데이터베이스의 데이터 정의를 어떻게 하느냐에 따라 
데이터 조작 및 제어의 난이도가 쉬워지는 느낌을 받았다.


<br>

##### 참고 자료
> <a href="https://namu.wiki/w/SQL/%EB%AC%B8%EB%B2%95">SQL / 문법 - namu.wiki</a>
> <a href="https://www.hanbit.co.kr/store/books/look.php?p_code=B8231888617">오라클로 배우는 DB 개론과 실습 - 박우창</a>